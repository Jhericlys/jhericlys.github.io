{"ast":null,"code":"var _jsxFileName = \"C:\\\\Programacao\\\\CCB\\\\Web\\\\src\\\\pages\\\\cardapio\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport { useParams } from \"react-router-dom\";\nimport Navbar from \"../../components/navbar\";\nimport './style.css';\nimport Star from '../../assets/star.png';\nimport Produto from '../../components/produto/lista';\nimport Footer from '../../components/footer';\nimport { useContext, useEffect, useState } from \"react\";\nimport api from '../../services/api';\nimport ProdutoModal from '../../components/produto/modal';\nimport FavVazio from '../../assets/favorito.png';\nimport FavCheio from '../../assets/favorito2.png';\nimport { CartContext } from \"../../contexts/cart\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Cardapio() {\n  _s();\n\n  const {\n    cart,\n    setEntregaCart,\n    idEstabelecimentoCart,\n    setIdEstabelecimentoCart\n  } = useContext(CartContext);\n  const {\n    id\n  } = useParams();\n  const [nome, setNome] = useState('');\n  const [endereco, setEndereco] = useState('');\n  const [complemento, setComplemento] = useState('');\n  const [bairro, setBairro] = useState('');\n  const [cidade, setCidade] = useState('');\n  const [uf, setUF] = useState('');\n  const [avaliacao, setAvaliacao] = useState(0);\n  const [foto, setFoto] = useState('');\n  const [entrega, setEntrega] = useState(0);\n  const [minimo, setMinimo] = useState(0);\n  const [qtd, setQtd] = useState(0);\n  const [favorito, setFavorito] = useState(false);\n  const [idFavorito, setIdFavorito] = useState(0);\n  const [id_produto, setId_produto] = useState(0);\n  const [categorias, setCategorias] = useState([]);\n  const [produtos, setProdutos] = useState([]);\n  const [isProdutoOpen, setIsProdutoOpen] = useState(false);\n  useEffect(() => {\n    api.get(`/v1/estabelecimentos/${id}`).then(response => {\n      setNome(response.data[0].nome);\n      setEndereco(response.data[0].endereco);\n      setComplemento(response.data[0].complemento);\n      setBairro(response.data[0].bairro);\n      setCidade(response.data[0].cidade);\n      setUF(response.data[0].uf);\n      setAvaliacao(response.data[0].avaliacao);\n      setFoto(response.data[0].url_foto);\n      setEntrega(response.data[0].vl_taxa_entrega);\n      setMinimo(response.data[0].vl_min_pedido);\n      setQtd(response.data[0].qtd_avaliacao);\n      setFavorito(response.data[0].id_favorito > 0);\n      setIdFavorito(response.data[0].id_favorito);\n    }).catch(err => {\n      console.log(err);\n    });\n    api.get(`/v1/cardapios/${id}`).then(response => {\n      let categoriasUnica = response.data.map(item => item.categoria);\n      categoriasUnica = categoriasUnica.filter((itemArray, i, arrayCompleto) => {\n        return arrayCompleto.indexOf(itemArray) === i;\n      });\n      setCategorias(categoriasUnica);\n      setProdutos(response.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  function openModalProduto(id_prod) {\n    // Valida se pode abrir o produto (nao pode ter iniciado compra de outro estab)\n    if (cart.length > 0 && idEstabelecimentoCart != id && idEstabelecimentoCart > 0) {\n      alert('Já existem produtos de outro estabelecimento na sacola.');\n      return;\n    }\n\n    setId_produto(id_prod);\n    setEntregaCart(entrega);\n    setIdEstabelecimentoCart(id);\n    setIsProdutoOpen(true);\n  }\n\n  function closeModalProduto() {\n    setIsProdutoOpen(false);\n  }\n\n  function Favoritar() {\n    api.post('/v1/estabelecimentos/favoritos', {\n      id_estabelecimento: id\n    }).then(response => {\n      setFavorito(true);\n      setIdFavorito(response.data.id_favorito);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  function RemoverFavorito() {\n    api.delete(`/v1/estabelecimentos/favoritos/${idFavorito}`).then(response => {\n      setFavorito(false);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid mt-page cardapio\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ProdutoModal, {\n      isOpen: isProdutoOpen,\n      onRequestClose: closeModalProduto,\n      id_produto: id_produto\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row col-lg-8 offset-lg-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"img-fluid rounded img-estab-cardapio\",\n          src: foto,\n          alt: \"Estabelecimento\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: nome\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"favorito\",\n            children: favorito ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: FavCheio,\n              alt: \"Remover Favorito\",\n              onClick: RemoverFavorito\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 40\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: FavVazio,\n              alt: \"Favoritar\",\n              onClick: Favoritar\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 40\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"classificacao\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [endereco, \" \", complemento.length > 0 ? ' - ' + complemento : null, \" - \", bairro, \" - \", cidade, \" - \", uf]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"classificacao\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: Star,\n            alt: \"Avalia\\xE7\\xE3o\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ms-1\",\n            children: avaliacao.toFixed(1)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ms-3\",\n            children: [qtd, \" avalia\\xE7\\xF5es\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"classificacao mt-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Taxa de entrega: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 27\n            }, this), new Intl.NumberFormat('pt-BR', {\n              style: 'currency',\n              currency: 'BRL'\n            }).format(entrega)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ms-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Pedido m\\xEDnimo: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 44\n            }, this), new Intl.NumberFormat('pt-BR', {\n              style: 'currency',\n              currency: 'BRL'\n            }).format(minimo)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }, this), categorias.map(categoria => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row mt-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              children: categoria\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this), produtos.map(produto => {\n            return produto.categoria === categoria ? /*#__PURE__*/_jsxDEV(Produto, {\n              nome: produto.nome,\n              descricao: produto.descricao,\n              vl_produto: produto.vl_produto,\n              vl_promocao: produto.vl_promocao,\n              url_foto: produto.url_foto,\n              id_produto: produto.id_produto,\n              onClickProduto: openModalProduto\n            }, produto.id_produto, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 37\n            }, this) : null;\n          })]\n        }, categoria, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 28\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 12\n  }, this);\n}\n\n_s(Cardapio, \"XZms3vnOoGZhF0tajCrRLN9OL6k=\", false, function () {\n  return [useParams];\n});\n\n_c = Cardapio;\nexport default Cardapio;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cardapio\");","map":{"version":3,"sources":["C:/Programacao/CCB/Web/src/pages/cardapio/index.jsx"],"names":["useParams","Navbar","Star","Produto","Footer","useContext","useEffect","useState","api","ProdutoModal","FavVazio","FavCheio","CartContext","Cardapio","cart","setEntregaCart","idEstabelecimentoCart","setIdEstabelecimentoCart","id","nome","setNome","endereco","setEndereco","complemento","setComplemento","bairro","setBairro","cidade","setCidade","uf","setUF","avaliacao","setAvaliacao","foto","setFoto","entrega","setEntrega","minimo","setMinimo","qtd","setQtd","favorito","setFavorito","idFavorito","setIdFavorito","id_produto","setId_produto","categorias","setCategorias","produtos","setProdutos","isProdutoOpen","setIsProdutoOpen","get","then","response","data","url_foto","vl_taxa_entrega","vl_min_pedido","qtd_avaliacao","id_favorito","catch","err","console","log","categoriasUnica","map","item","categoria","filter","itemArray","i","arrayCompleto","indexOf","openModalProduto","id_prod","length","alert","closeModalProduto","Favoritar","post","id_estabelecimento","RemoverFavorito","delete","toFixed","Intl","NumberFormat","style","currency","format","produto","descricao","vl_produto","vl_promocao"],"mappings":"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","sourcesContent":["import { useParams } from \"react-router-dom\";\r\n\r\nimport Navbar from \"../../components/navbar\";\r\nimport './style.css';\r\nimport Star from '../../assets/star.png';\r\nimport Produto from '../../components/produto/lista';\r\nimport Footer from '../../components/footer';\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport api from '../../services/api';\r\nimport ProdutoModal from '../../components/produto/modal';\r\nimport FavVazio from '../../assets/favorito.png';\r\nimport FavCheio from '../../assets/favorito2.png';\r\nimport { CartContext } from \"../../contexts/cart\";\r\n\r\n\r\n\r\nfunction Cardapio(){\r\n\r\n    const {cart, setEntregaCart, idEstabelecimentoCart, setIdEstabelecimentoCart} = useContext(CartContext);\r\n\r\n    const {id} = useParams();\r\n    const [nome, setNome] = useState('');\r\n    const [endereco, setEndereco] = useState('');\r\n    const [complemento, setComplemento] = useState('');\r\n    const [bairro, setBairro] = useState('');\r\n    const [cidade, setCidade] = useState('');\r\n    const [uf, setUF] = useState('');\r\n    const [avaliacao, setAvaliacao] = useState(0);\r\n    const [foto, setFoto] = useState('');\r\n    const [entrega, setEntrega] = useState(0);\r\n    const [minimo, setMinimo] = useState(0);\r\n    const [qtd, setQtd] = useState(0);\r\n    const [favorito, setFavorito] = useState(false);\r\n    const [idFavorito, setIdFavorito] = useState(0);\r\n    const [id_produto, setId_produto] = useState(0);\r\n\r\n    const [categorias, setCategorias] = useState([]);\r\n    const [produtos, setProdutos] = useState([]);\r\n\r\n    const [isProdutoOpen, setIsProdutoOpen] = useState(false);\r\n\r\n    useEffect(() => {\r\n        api.get(`/v1/estabelecimentos/${id}`)\r\n        .then(response => {\r\n            setNome(response.data[0].nome);\r\n            setEndereco(response.data[0].endereco);\r\n            setComplemento(response.data[0].complemento);\r\n            setBairro(response.data[0].bairro);\r\n            setCidade(response.data[0].cidade);\r\n            setUF(response.data[0].uf)\r\n            setAvaliacao(response.data[0].avaliacao);\r\n            setFoto(response.data[0].url_foto);\r\n            setEntrega(response.data[0].vl_taxa_entrega);\r\n            setMinimo(response.data[0].vl_min_pedido);\r\n            setQtd(response.data[0].qtd_avaliacao);\r\n            setFavorito(response.data[0].id_favorito > 0);\r\n            setIdFavorito(response.data[0].id_favorito);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n\r\n        api.get(`/v1/cardapios/${id}`)\r\n        .then(response => {\r\n\r\n            let categoriasUnica = response.data.map(item => item.categoria);\r\n\r\n            categoriasUnica = categoriasUnica.filter((itemArray, i, arrayCompleto) => {\r\n                return arrayCompleto.indexOf(itemArray) === i;\r\n            });\r\n                 \r\n            setCategorias(categoriasUnica);\r\n            setProdutos(response.data);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n    }, []);\r\n\r\n    function openModalProduto(id_prod){\r\n\r\n        // Valida se pode abrir o produto (nao pode ter iniciado compra de outro estab)\r\n        if (cart.length > 0 && idEstabelecimentoCart != id && idEstabelecimentoCart > 0) {\r\n            alert('Já existem produtos de outro estabelecimento na sacola.');\r\n            return;\r\n        }\r\n\r\n        setId_produto(id_prod);\r\n        setEntregaCart(entrega);\r\n        setIdEstabelecimentoCart(id);\r\n        setIsProdutoOpen(true);\r\n    }\r\n\r\n    function closeModalProduto(){\r\n        setIsProdutoOpen(false);\r\n    }\r\n\r\n    function Favoritar(){\r\n        api.post('/v1/estabelecimentos/favoritos', {\r\n            id_estabelecimento: id\r\n        })\r\n        .then(response => {\r\n            setFavorito(true);\r\n            setIdFavorito(response.data.id_favorito);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n    }\r\n\r\n    function RemoverFavorito(){\r\n        api.delete(`/v1/estabelecimentos/favoritos/${idFavorito}`)\r\n        .then(response => {\r\n            setFavorito(false);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n    }\r\n\r\n    return <div className=\"container-fluid mt-page cardapio\">\r\n        <Navbar />\r\n\r\n        <ProdutoModal isOpen={isProdutoOpen}\r\n                      onRequestClose={closeModalProduto}\r\n                      id_produto={id_produto}/>\r\n\r\n        <div className=\"row col-lg-8 offset-lg-2\">\r\n            <div className=\"col-12\">\r\n                <img className=\"img-fluid rounded img-estab-cardapio\" \r\n                     src={foto}\r\n                     alt=\"Estabelecimento\" />\r\n            </div>\r\n\r\n            <div className=\"col-12 mt-4\">\r\n                <div className=\"d-flex justify-content-between\">\r\n                    <h2>{nome}</h2>\r\n                    <div className=\"favorito\">\r\n                        {\r\n                            favorito ? <img src={FavCheio} alt=\"Remover Favorito\" onClick={RemoverFavorito} /> \r\n                                     : <img src={FavVazio} alt=\"Favoritar\" onClick={Favoritar} />\r\n                        }\r\n                        \r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"classificacao\">\r\n                    <span>{endereco} {complemento.length > 0 ? ' - ' + complemento : null} - {bairro} - {cidade} - {uf}</span>\r\n                </div>\r\n                \r\n                <div className=\"classificacao\">\r\n                    <img src={Star} alt=\"Avaliação\" />\r\n                    <span className=\"ms-1\">{avaliacao.toFixed(1)}</span>\r\n                    <span className=\"ms-3\">{qtd} avaliações</span>\r\n                </div>\r\n\r\n                <div className=\"classificacao mt-3\">                    \r\n                    <span><b>Taxa de entrega: </b>\r\n                    {new Intl.NumberFormat('pt-BR', {style: 'currency',currency: 'BRL'}).format(entrega)}\r\n                    </span>\r\n                    <span className=\"ms-5\"><b>Pedido mínimo: </b>\r\n                    {new Intl.NumberFormat('pt-BR', {style: 'currency',currency: 'BRL'}).format(minimo)}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n       \r\n\r\n\r\n            {\r\n                categorias.map(categoria => {\r\n                    return <div key={categoria} className=\"row mt-5\">\r\n                        <div className=\"mb-3\">\r\n                            <h5>{categoria}</h5>\r\n                        </div>\r\n\r\n                        {\r\n                            produtos.map(produto => {\r\n                                return produto.categoria === categoria ?\r\n                                    <Produto key={produto.id_produto}\r\n                                             nome={produto.nome}\r\n                                             descricao={produto.descricao}\r\n                                             vl_produto={produto.vl_produto}\r\n                                             vl_promocao={produto.vl_promocao}\r\n                                             url_foto={produto.url_foto}\r\n                                             id_produto={produto.id_produto}\r\n                                             onClickProduto={openModalProduto}\r\n                                             />\r\n                                : null\r\n                            })\r\n                        }\r\n                    </div>\r\n                })\r\n            }\r\n\r\n        </div>\r\n\r\n        <Footer />\r\n        \r\n    </div>\r\n}\r\n\r\nexport default Cardapio;"]},"metadata":{},"sourceType":"module"}